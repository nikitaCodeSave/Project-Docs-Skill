# ADR-001: Выбор WhisperX для транскрипции

**Статус:** Accepted
**Дата:** 2024-01-15
**Связь с SPEC:** FR-1, FR-2, NFR-1

## Контекст

Необходим движок транскрипции с diarization, word-level timestamps, локальной работой.

**Движущие факторы:**
- WER < 10% (требование PRD)
- Время ≤ 0.5x длины (NFR-1)
- Минимальная сложность интеграции

**Ограничения:**
- Consumer GPU (8-10 GB VRAM)
- Open-source

## Рассмотренные варианты

### Вариант 1: OpenAI Whisper

| Критерий | Оценка |
|----------|--------|
| Качество | + Отличное |
| Diarization | - Нет |
| Скорость | - Медленный |

### Вариант 2: Whisper + pyannote (раздельно)

| Критерий | Оценка |
|----------|--------|
| Качество | + Отличное |
| Diarization | + Есть |
| Интеграция | - Сложная |

### Вариант 3: WhisperX

| Критерий | Оценка |
|----------|--------|
| Качество | + Отличное |
| Diarization | + Встроенный |
| Скорость | + 70x realtime |
| Интеграция | + Единый pipeline |

## Решение

**Выбран вариант 3: WhisperX**

Обоснование:
- Batched inference критичен для NFR-1
- Единый pipeline снижает сложность
- 19k+ stars, активное сообщество

## Последствия

### Положительные
- Быстрый старт
- Меньше кода интеграции

### Отрицательные
- Зависимость от pyannote (HF token)
- Ограниченный контроль над diarization

### Риски
- Breaking changes — митигация: фиксация версии
