# Шаблон: SPEC (Functional Specification)

Функциональная спецификация. Отвечает на вопрос "ЧТО делает система".

## Назначение

- Определить функциональные требования (FR)
- Зафиксировать нефункциональные требования (NFR)
- Описать acceptance criteria для каждого требования
- Определить терминологию домена (глоссарий)

## Принципы

- **ЧТО, не КАК** — требования, не реализация
- **Проверяемость** — каждое требование можно протестировать
- **Независимость от реализации** — не навязывает технические решения
- **Трассируемость** — связь с целями из PRD

---

## Шаблон

```markdown
# SPEC: {Название проекта}

## Обзор
{1-2 абзаца: что делает система}

## Глоссарий

| Термин | Определение |
|--------|-------------|
| {Термин} | {Определение} |

## Допущения
- {Что предполагаем истинным}

## Функциональные требования

### FR-1: {Название}

**Связь с PRD:** G1, G2

{Описание — что система должна делать}

**Acceptance Criteria:**
```gherkin
AC-1.1:
GIVEN {начальное состояние}
WHEN {действие}
THEN {ожидаемый результат}
```

**Примеры:**
| Вход | Выход | Примечание |
|------|-------|------------|
| {input} | {output} | {note} |

---

### FR-2: {Название}
...

## Нефункциональные требования

### NFR-1: Производительность
| Метрика | Требование | Условия |
|---------|------------|---------|
| {Метрика} | {Значение} | {Условия} |

### NFR-2: Надёжность
{Требования к обработке ошибок}

### NFR-3: Ресурсы
| Ресурс | Требование |
|--------|------------|
| {Ресурс} | {Значение} |

## Интерфейсы

### Входные данные
| Параметр | Тип | Обязательный | Ограничения |
|----------|-----|--------------|-------------|

### Выходные данные
Подробнее: [data-formats.md](data-formats.md)

### Пользовательский интерфейс
Подробнее: [api.md](api.md)

## Ограничения системы
- {Что система НЕ делает}

## Вне рамок версии
- {Функциональность} — планируется в vX

## Открытые вопросы

### Бизнес-вопросы (требуют ответа заказчика)

Вопросы о scope, приоритетах, ограничениях — то, что заказчик должен решить.

| Вопрос | Статус | Ответ |
|--------|--------|-------|
| {Вопрос} | Открыт/Закрыт | {Ответ заказчика} |

### Технические решения (принимаются разработчиком)

Выбор реализации, алгоритмов, библиотек — решается при разработке или в ADR.

| Вопрос | Варианты | Решение | ADR |
|--------|----------|---------|-----|
| {Вопрос} | A, B, C | {Выбор} | ADR-XXX |

## Связанные документы
- [PRD.md](PRD.md) — бизнес-контекст
- [api.md](api.md) — интерфейсы
- [data-formats.md](data-formats.md) — форматы данных
```

---

## Чего избегать

❌ Имена классов, функций, переменных
❌ Конкретные библиотеки (если не в ADR)
❌ Пути к файлам
❌ Рабочий код
❌ "КАК" вместо "ЧТО"

## Граница SPEC и ADR

| В SPEC (ЧТО) | В ADR (ПОЧЕМУ) |
|--------------|----------------|
| "Поддержка diarization" | "Выбран WhisperX потому что..." |
| "CLI интерфейс" | "Выбран Typer потому что..." |
